<html>
  <head>
    <%= javascript_include_tag "prototype" %>

    <style>
      #second_patient_div {
        float:right;
        width:49%;
        border-style: solid;
        border-width: 1px;
        margin: 10px;
        padding-left: 5px;
        height:85%;
        overflow:auto;
      }

      #primary_patient_div {
        float:left;
        width:98%;
        height:85%;
        border-style: solid;
        border-width: 1px;
        margin: 10px;
        padding-left: 5px;
      }

      table{
        font-size:20px;
        padding-left:10px;
      }

      #popUpBox{
        position: absolute;
        top: 84px;
        left: 420px;
        border: solid 1px #000000;
        background-color:MediumTurquoise;
        visibility: hidden;
        font-size: 25;
        z-index: 600;
        width:413px;
        -moz-user-select:none
      }

      .reassign_btn a{
        background-color: #669999;
        border-bottom: 1px outset black;
        border-radius: 7px 7px 7px 7px;
        border-style: outset;
        border-top: 1px outset black;
        color: white;
        display: block;
        padding: 10px 16px 10px 10px;
        text-align: center;
        text-decoration: none;
      }

      #update-button {
        background-color: #4a708b;
        border-bottom: 1px outset black;
        color: white;
        padding: 10px 16px 10px 10px;
        text-align: center;
        text-decoration: none;
        cursor: pointer;
      }
    </style>

    <script>
      var tt_cancel_destination = "/clinic";


      function newNpid(local_person_id,remote_person_id) {
        /*
        If a user selects this method,that means that the selected patient is the same
        patient on the 'left' side of the screen ...
         */
        document.location = "/people/reassign_dde_national_id?dde_person_id=" + remote_person_id + "&local_person_id=" + local_person_id;
      }

      function newLocalID(patient_id,national_id) {
        document.location = "/people/reassign_national_identifier?person_id=" + patient_id + "&identifier=" + national_id;
      }

      function createPersonLocally(person_id) {
        /*
        If a user selects this method,that means that the selected patient is currently
        not on the server but on the proxy.
        NOTE: the patient will be created locally with a new version 4 number
         */
        document.location = "/people/create_person_from_dde?remote_person_id=" + person_id;
      }

      function remoteNewID(national_id) {
        /*
        If a user selects this method,that means that the selected patient is a
        different patient all together - the patient on the 'left' side of the screen
        and the selected patient are different...
         */
        document.location = "/people/search?identifier=" + national_id;
      }

      function postToSelect(national_id) {
        document.location = "/people/search?identifier=" + national_id;
      }
    </script>
  </head>


  <div id='primary_patient_div'>
    <div>
      <h4>
        This patient has inconsistency dates of outcomes. Refer below for details
      </h4>
    </div>
    <div><hr /></div>
    <div><b>Name:</b>&nbsp; <%= @patient_bean.name %></div>
    <div><b>Age</b>&nbsp;<%= @patient_bean.age %></div>
    <div><b>Gender</b>&nbsp;<%= @patient_bean.sex %></div>
    <div><b>National ID:</b>&nbsp; <%= @patient_bean.national_id_with_dashes %></div>
    <div><b>Home district:</b>&nbsp; <%= @patient_bean.home_district %></div>
    <div><b>Current address:</b>&nbsp; <%= @patient_bean.current_residence %></div>
    <div>&nbsp;</div>
    <div><hr /></div>
    

    <table style="width: 98%;">
      <thead>
        <tr>
          <th>Outcome</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <% @patient_states.each do |patient_state| %>
          <tr>
            <td style="background-color: #fff68f;"><%= patient_state.name %></td>
            <td style="background-color: #fff68f; text-align: center;"><%= patient_state.start_date.to_date.strftime("%d-%b-%Y") rescue patient_state.start_date %></td>
            <td style="background-color: #fff68f; text-align: center;"><%= patient_state.end_date.to_date.strftime("%d-%b-%Y") rescue patient_state.end_date%></td>
            <td id="update-button" style="text-align: center; width: 354px;">Update Dates</td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div><hr /></div>
    
    <!--<div style="margin-left:-4px;" class="reassign_btn">
      <a href="#">Fix Inconsistency Now</a>
    </div>-->
  </div>

  <script type="text/javascript">
    var tt_cancel_destination = '<%= @next_task %>'
    window.onload = function(){
      __$('finishButton').innerHTML = '<span>Continue without fixing</span>'
    }
  </script>
</html>
